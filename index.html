<!doctype html>
<html lang="en" ng-app="chatApp">
<head>
  <meta charset="utf-8">
  <title>node_chat</title>
  <script type="text/javascript" src="bower_components/angular/angular.js"></script>
  <script type="text/javascript" src="js/controller/index.js"></script>
  <script type="text/javascript" src="js/services/index.js"></script>
  <script type="text/javascript" src="js/index.js"></script>
</head>
<body>
  <div ng-controller="PeerCtrl">
    <h3>Peers:</h3>
    <ul id="peers">
      <li ng-repeat="(ip, data) in peers | orderBy:name">
        <div>
          <div ng-click="startConnection(data.remote)">
            <strong>{{data.infos.name}}</strong> 
            <span>({{data.remote.address}}:{{data.remote.port}})</span>
          </div>
          <button ng-disabled="!data.open" ng-click="stopConnection(data.remote)">close</button>
        </div>
      </li>
    </ul>
  </div>
  <div ng-controller="HistoryCtrl">
    <h4>History</h4>
    <ul>
      <li ng-repeat="line in history | orderBy:line.time">
        [{{line.time}}] : {{line.msg}}
      </li>
    </ul>
  </div>
  <div ng-controller="MsgCtrl">
    <form ng-submit="send()">
      <textarea name="msg" ng-model="msg" required ng-disabled="!open"></textarea>
      <button type="submit" ng-disabled="!open">send</button>
    </form>
  </div>
</body>
</html>